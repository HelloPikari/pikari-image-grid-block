/**
 * Editor-specific styles.
 */

/* Editor wrapper */
.wp-block-pikari-image-grid {
	width: fit-content;
	/* Center the block when inside groups with centering */
	.is-layout-constrained > &[data-align="wide"],
	.is-layout-constrained > &[data-align="full"],
	.wp-block-group > & {
		> div {
			display: table;
			width: fit-content;
		}
	}

	/* Placeholder styles for empty image positions */
	.image-placeholder {
		background-color: #f0f0f0;
		display: flex;
		align-items: center;
		justify-content: center;
		width: 100%;
		height: 100%;
		border-radius: var(--image-grid-border-radius, 8px);
		span {
			color: #757575;
			font-size: 14px;
			font-weight: 500;
		}
	}

	/* Ensure grid items have proper height in editor */
	.image-grid-item {
		min-height: 50px;
		
		/* Style the placeholder container */
		&.has-placeholder {
			border: 2px dashed #ddd;
			border-radius: var(--image-grid-border-radius, 8px);
		}
	}

	/* ResizableBox styles */
	.image-grid-resizable {
		position: relative;
		display: inline-block;
		max-width: 100%;

		/* When no dimensions are set, use fit-content */
		&:not([style*="height:"]) {
			height: fit-content !important;
		}
		&:not([style*="width:"]) {
			width: fit-content !important;
		}

		/* Ensure it can be centered when in a centered context */
		.components-resizable-box__container {
			margin: 0 auto;
			
			/* Support fit-content dimensions when not explicitly sized */
			&:not([style*="height:"]) {
				height: fit-content !important;
			}
			&:not([style*="width:"]) {
				width: fit-content !important;
			}
		}
	}
	.components-resizable-box__handle {
		z-index: 2;
	}

	/* Grid container within ResizableBox */
	.image-grid-container {
		position: relative;

		/* Update grid layouts to work within container */
		&.is-layout-asymmetric {
			grid-template-columns: repeat(7, minmax(0, 1fr));
			grid-template-rows: repeat(7, minmax(0, 1fr));

			/* Position items in asymmetric grid - editor */
			> .image-grid-item {
				&:nth-child(1) {
					grid-row: 1 / span 3;
					grid-column: 2 / span 2;
				}
				&:nth-child(2) {
					grid-row: 5 / span 3;
					grid-column: 4 / span 3;
				}
				&:nth-child(3) {
					grid-row: 4 / span 3;
					grid-column: 1 / span 3;
				}
				&:nth-child(4) {
					grid-row: 2 / span 3;
					grid-column: 4 / span 4;
				}
			}
		}
		&.is-layout-equal {
			grid-template-columns: repeat(2, 1fr);
			grid-template-rows: repeat(2, 1fr);
		}
		&.is-layout-masonry {
			grid-template-columns: repeat(2, 1fr);
			grid-auto-rows: minmax(150px, auto);

			/* Masonry variations in editor */
			> .image-grid-item {
				&:nth-child(1),
				&:nth-child(3) {
					grid-row: span 2;
				}
			}
		}
	}
}

/* Style the image controls in the sidebar */
.image-grid-control {
	margin-bottom: 20px;
	.image-control-wrapper {
		margin-top: 8px;
	}
	img {
		display: block;
		max-width: 100%;
		height: auto;
	}
}
